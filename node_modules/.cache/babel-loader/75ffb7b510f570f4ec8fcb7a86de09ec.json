{"ast":null,"code":"import _regeneratorRuntime from\"/Users/artemparhomenko/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/artemparhomenko/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"/Users/artemparhomenko/my-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"/Users/artemparhomenko/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{profileAPI}from\"../api/api\";var ADD_POST='ADD-POST';var SET_USER_PROFILE='SET-USER-PROFILE';var SET_USER_STATUS='SET-USER-STATUS';var UPDATE_PHOTO_SUCCESS='UPDATE_PHOTO_SUCCESS';var initialState={postsData:[{id:1,message:'Hi, how are you?',likesCount:12},{id:2,message:'It\\'s my first post',likesCount:11}],profile:null,status:''};var profileReducer=function profileReducer(){var state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;var action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:var id=state.postsData.length+1;return _objectSpread(_objectSpread({},state),{},{postsData:[].concat(_toConsumableArray(state.postsData),[{id:id,message:action.newPost,likesCount:0}])});case SET_USER_PROFILE:return _objectSpread(_objectSpread({},state),{},{profile:action.profile});case SET_USER_STATUS:return _objectSpread(_objectSpread({},state),{},{status:action.status});case UPDATE_PHOTO_SUCCESS:return _objectSpread(_objectSpread({},state),{},{profile:_objectSpread(_objectSpread({},state.profile),{},{photos:action.photos})});default:return state;}};export var addPost=function addPost(newPost){return{type:ADD_POST,newPost:newPost};};export var setUserProfile=function setUserProfile(profile){return{type:SET_USER_PROFILE,profile:profile};};export var setUserStatus=function setUserStatus(status){return{type:SET_USER_STATUS,status:status};};export var updatePhotoSuccess=function updatePhotoSuccess(photos){return{type:UPDATE_PHOTO_SUCCESS,photos:photos};};export var getProfile=function getProfile(userId){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(dispatch){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return profileAPI.getProfile(userId);case 2:response=_context.sent;dispatch(setUserProfile(response));case 4:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};export var getStatus=function getStatus(userId){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(dispatch){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return profileAPI.getStatus(userId);case 2:response=_context2.sent;dispatch(setUserStatus(response));case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var updateStatus=function updateStatus(status){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(dispatch,getState){var response;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return profileAPI.updateStatus(status);case 2:response=_context3.sent;if(response.data.resultCode===0){dispatch(getStatus(getState().auth.id));}case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();};export var updatePhoto=function updatePhoto(photos){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(dispatch){var response;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return profileAPI.updatePhoto(photos);case 2:response=_context4.sent;if(response.data.resultCode===0){dispatch(updatePhotoSuccess(response.data.data.photos));}case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function(_x5){return _ref4.apply(this,arguments);};}();};export var updateProfile=function updateProfile(description){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(dispatch,getState){var response;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return profileAPI.updateProfile(description);case 2:response=_context5.sent;if(response.data.resultCode===0){dispatch(getProfile(getState().auth.id));}case 4:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x6,_x7){return _ref5.apply(this,arguments);};}();};export default profileReducer;","map":{"version":3,"names":["profileAPI","ADD_POST","SET_USER_PROFILE","SET_USER_STATUS","UPDATE_PHOTO_SUCCESS","initialState","postsData","id","message","likesCount","profile","status","profileReducer","state","action","type","length","newPost","photos","addPost","setUserProfile","setUserStatus","updatePhotoSuccess","getProfile","userId","dispatch","response","getStatus","updateStatus","getState","data","resultCode","auth","updatePhoto","updateProfile","description"],"sources":["/Users/artemparhomenko/my-app/src/redux/profile-reducer.js"],"sourcesContent":["import { profileAPI } from \"../api/api\";\n\nconst ADD_POST = 'ADD-POST';\nconst SET_USER_PROFILE = 'SET-USER-PROFILE'\nconst SET_USER_STATUS = 'SET-USER-STATUS'\nconst UPDATE_PHOTO_SUCCESS = 'UPDATE_PHOTO_SUCCESS'\n\nlet initialState = {\n    postsData: [\n        { id: 1, message: 'Hi, how are you?', likesCount: 12 },\n        { id: 2, message: 'It\\'s my first post', likesCount: 11 },\n    ],\n    profile: null,\n    status: '',\n};\n\nconst profileReducer = (state = initialState, action) => {\n    switch (action.type) {\n        case ADD_POST:\n            const id = state.postsData.length + 1\n            return {\n                ...state,\n                postsData: [...state.postsData, { id: id, message: action.newPost, likesCount: 0 }]\n            };\n        case SET_USER_PROFILE:\n            return {\n                ...state,\n                profile: action.profile\n            };\n        case SET_USER_STATUS:\n            return {\n                ...state,\n                status: action.status\n            };\n        case UPDATE_PHOTO_SUCCESS:\n            return {\n                ...state,\n                profile: {...state.profile, photos: action.photos} \n            }\n        default:\n            return state;\n    }\n}\n\nexport const addPost = (newPost) => ({ type: ADD_POST, newPost })\nexport const setUserProfile = (profile) => ({ type: SET_USER_PROFILE, profile })\nexport const setUserStatus = (status) => ({ type: SET_USER_STATUS, status })\nexport const updatePhotoSuccess = (photos) => ({ type: UPDATE_PHOTO_SUCCESS, photos })\n\nexport const getProfile = (userId) => async (dispatch) => {\n    let response = await profileAPI.getProfile(userId)\n    dispatch(setUserProfile(response))\n}\nexport const getStatus = (userId) => async (dispatch) => {\n    let response = await profileAPI.getStatus(userId)\n    dispatch(setUserStatus(response))\n}\nexport const updateStatus = (status) => async (dispatch, getState) => {\n    let response = await profileAPI.updateStatus(status)\n    if (response.data.resultCode === 0) {\n        dispatch(getStatus(getState().auth.id))\n    }\n}\nexport const updatePhoto = (photos) => async (dispatch) => {\n    let response = await profileAPI.updatePhoto(photos)\n    if (response.data.resultCode === 0) {\n        dispatch(updatePhotoSuccess(response.data.data.photos))\n    }\n}\nexport const updateProfile = (description) => async (dispatch, getState) => {\n    let response = await profileAPI.updateProfile(description)\n    if (response.data.resultCode === 0) {\n        dispatch(getProfile(getState().auth.id))\n    }\n}\n\nexport default profileReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}